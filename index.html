<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</title>

  <!-- Styles & PWA -->
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./icon-192.png" />
  <meta name="theme-color" content="#764ba2" />
</head>
<body>
  <div class="container">
    <h1>üßÆ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</h1>

    <div class="main-container">
      <div class="calculator">
        <input type="text" class="display" id="display" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏π‡∏ï‡∏£‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." />
        <div class="result-display" id="resultDisplay"></div>

        <div class="button-grid">
          <!-- Variables -->
          <button class="button" onclick="addToDisplay('p')">p</button>
          <button class="button" onclick="addToDisplay('q')">q</button>
          <button class="button" onclick="addToDisplay('r')">r</button>
          <button class="button" onclick="addToDisplay('s')">s</button>

          <!-- Operators (‡πÄ‡∏≠‡∏≤ ‚äï ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß) -->
          <button class="button" onclick="addToDisplay('‚àß')">‚àß</button>
          <button class="button" onclick="addToDisplay('‚à®')">‚à®</button>
          <button class="button" onclick="addToDisplay('~')">~</button>
          <button class="button" onclick="addToDisplay('‚Üí')">‚Üí</button>
          <button class="button" onclick="addToDisplay('‚Üî')">‚Üî</button>
          <button class="button" onclick="addToDisplay('(')">(</button>
          <button class="button" onclick="addToDisplay(')')">)</button>

          <!-- Functions -->
          <button class="button btn-clear" onclick="clearDisplay()">‡∏•‡πâ‡∏≤‡∏á</button>
          <button class="button btn-clear" onclick="backspace()">‡∏•‡∏ö</button>
          <button class="button" onclick="moveCursorLeft()">‚Üê</button>
          <button class="button" onclick="moveCursorRight()">‚Üí</button>
          <button class="button btn-equals" onclick="evaluateExpression()">= ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</button>
        </div>

        <div class="under-controls">
          <button class="button btn-toggle" onclick="toggleTruthTable()">
            <span id="toggleText">‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</span>
          </button>
          <button class="button btn-install" id="installButton" onclick="installApp()" style="display:none">
            üì± ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏û
          </button>
        </div>
      </div>
    </div>

    <div class="truth-table" id="truthTable" style="display:none">
      <h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</h3>
      <div class="table-container">
        <table id="truthTableContent">
          <thead><tr id="tableHeader"></tr></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Install Help Message -->
    <div id="installHelp" hidden></div>
  </div>

  <!-- JS -->
  <script src="./script.js" defer></script>
  <script src="./pwa.js" defer></script>
</body>
</html>
  <!-- Install Help Message -->
  <div id="installHelp" hidden></div>

  <script src="./script.js" defer></script>
  <script src="./pwa.js" defer></script>
</body>
</html>      </div>
    </div>
  </div>

  <!-- JS ‡∏´‡∏•‡∏±‡∏Å -->
  <script src="./script.js" defer></script>

  <!-- PWA: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á + ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô SW ‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏µ‡∏¢‡∏ö (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå) -->
  <script>
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault(); deferredPrompt = e;
      const btn = document.getElementById('installButton'); if (btn) btn.style.display = 'inline-flex';
    });
    function installApp(){
      if(!deferredPrompt){ alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå'); return; }
      deferredPrompt.prompt(); deferredPrompt.userChoice.finally(()=> deferredPrompt=null);
    }
    window.addEventListener('load', async () => {
      if ('serviceWorker' in navigator) { try { await navigator.serviceWorker.register('./sw.js'); } catch(e){} }
    });
  </script>
</body>
</html>
