<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</title>
  <meta name="description" content="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏õ (PWA)" />

  <!-- Styles & PWA -->
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./icon-192.png" />
  <meta name="theme-color" content="#764ba2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="LogicCalc" />
</head>
<body>
  <div class="page">
    <h1><span class="logo">üßÆ</span> ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</h1>

    <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç -->
    <div class="calculator">
      <input type="text" id="display" class="display" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏π‡∏ï‡∏£‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." autocomplete="off" spellcheck="false" />
      <div id="resultDisplay" class="result-display" aria-live="polite"></div>

      <div class="button-grid" role="group" aria-label="‡∏õ‡∏∏‡πà‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏¥‡∏°‡∏û‡πå">
        <!-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ -->
        <button class="button btn-variable" onclick="addToDisplay('p')">p</button>
        <button class="button btn-variable" onclick="addToDisplay('q')">q</button>
        <button class="button btn-variable" onclick="addToDisplay('r')">r</button>
        <button class="button btn-variable" onclick="addToDisplay('s')">s</button>
        <!-- ‡∏ï‡∏±‡∏ß‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (‡πÑ‡∏°‡πà‡∏°‡∏µ XOR) -->
        <button class="button btn-operator" onclick="addToDisplay('‚àß')" title="AND">‚àß</button>
        <button class="button btn-operator" onclick="addToDisplay('‚à®')" title="OR">‚à®</button>
        <button class="button btn-operator" onclick="addToDisplay('~')" title="NOT">~</button>
        <button class="button btn-operator" onclick="addToDisplay('‚Üí')" title="IMPLIES">‚Üí</button>
        <button class="button btn-operator" onclick="addToDisplay('‚Üî')" title="IFF">‚Üî</button>
        <!-- ‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏ö -->
        <button class="button btn-bracket" onclick="addToDisplay('(')">(</button>
        <button class="button btn-bracket" onclick="addToDisplay(')')">)</button>
        <!-- ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á -->
        <button class="button btn-equals" onclick="evaluateExpression()">= ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</button>
      </div>

      <div class="under-controls">
        <button class="muted-btn" onclick="toggleTruthTable()"><span id="toggleText">‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</span></button>
        <button class="muted-btn" onclick="moveCursorLeft()">‚Üê</button>
        <button class="muted-btn" onclick="moveCursorRight()">‚Üí</button>
        <button class="muted-btn" onclick="backspace()">‡∏•‡∏ö</button>
        <button class="muted-btn" onclick="clearDisplay()">‡∏•‡πâ‡∏≤‡∏á</button>
        <button class="muted-btn" id="installButton" onclick="installApp()" style="display:none">üì± ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏û</button>
        <button class="button btn-download" onclick="downloadTruthTable()">‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
      </div>
    </div>

    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
    <div class="truth-box" id="truthTable" aria-live="polite" hidden>
      <h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</h3>
      <div class="table-container">
        <table id="truthTableContent">
          <thead><tr id="tableHeader"></tr></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- JS ‡∏´‡∏•‡∏±‡∏Å -->
  <script src="./script.js" defer></script>

  <!-- PWA: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á + ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô SW ‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏µ‡∏¢‡∏ö (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ö‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå) -->
  <script>
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault(); deferredPrompt = e;
      const btn = document.getElementById('installButton'); if (btn) btn.style.display = 'inline-flex';
    });
    function installApp(){
      if(!deferredPrompt){ alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå'); return; }
      deferredPrompt.prompt(); deferredPrompt.userChoice.finally(()=> deferredPrompt=null);
    }
    window.addEventListener('load', async () => {
      if ('serviceWorker' in navigator) { try { await navigator.serviceWorker.register('./sw.js'); } catch(e){} }
    });
  </script>
</body>
</html>
